<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Halajobs.qa â€” Your Gateway to Jobs in Qatar</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 0;
    }
    header {
      background: white;
      padding: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    header small {
      display: block;
      font-size: 12px;
      font-weight: normal;
      color: #555;
    }
    #feed {
      max-width: 600px;
      margin: 20px auto;
      padding: 10px;
    }
    .job-card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      padding: 15px;
    }
    .job-card img {
      max-width: 100%;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .job-card h3 {
      margin: 5px 0;
    }
    .job-card p {
      margin: 3px 0;
      color: #333;
    }
    .actions {
      margin-top: 10px;
    }
    .actions button {
      margin-right: 8px;
      background: #1877f2;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    .actions button.whatsapp { background: #25d366; }
    .actions button.copy { background: #555; }
    .delete-btn {
      background: red;
      display: none; /* Hidden until Admin Mode */
    }
    #postJobBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #1877f2;
      color: white;
      border: none;
      padding: 15px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }
    #jobForm {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      z-index: 1000;
      width: 300px;
    }
    #jobForm input, #jobForm textarea, #jobForm select {
      width: 100%;
      margin: 5px 0;
      padding: 8px;
    }
    #overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 999;
    }
    #adminToggle {
      text-align: center;
      margin: 10px;
    }
    #adminToggle button {
      padding: 5px 10px;
      border: none;
      background: orange;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    Halajobs.qa
    <small>Your Gateway to Jobs in Qatar</small>
  </header>

  <div id="adminToggle">
    <button onclick="toggleAdminMode()">Admin Mode</button>
  </div>

  <div id="feed"></div>

  <button id="postJobBtn">+</button>

  <div id="overlay"></div>
  <div id="jobForm">
    <h3>Post a Job</h3>
    <input type="text" id="position" placeholder="Position" required>
    <textarea id="description" placeholder="Job Description"></textarea>
    <input type="text" id="salary" placeholder="Salary">
    <input type="text" id="company" placeholder="Company Name">
    <input type="text" id="contact" placeholder="Contact (Phone/Email)">
    <input type="text" id="category" placeholder="Category">
    <input type="file" id="poster">
    <button onclick="submitJob()">Submit</button>
    <button onclick="closeForm()">Cancel</button>
  </div>

  <script>
    const feed = document.getElementById('feed');
    const overlay = document.getElementById('overlay');
    const form = document.getElementById('jobForm');
    const postBtn = document.getElementById('postJobBtn');
    let adminMode = false;
    const ADMIN_PASSWORD = "451588";

    postBtn.onclick = () => { overlay.style.display='block'; form.style.display='block'; };
    overlay.onclick = closeForm;

    function closeForm() {
      overlay.style.display='none'; form.style.display='none';
    }

    function submitJob() {
      const job = {
        id: Date.now(),
        position: document.getElementById('position').value,
        description: document.getElementById('description').value,
        salary: document.getElementById('salary').value,
        company: document.getElementById('company').value,
        contact: document.getElementById('contact').value,
        category: document.getElementById('category').value,
        poster: document.getElementById('poster').files[0] ? URL.createObjectURL(document.getElementById('poster').files[0]) : null,
        date: Date.now()
      };
      let jobs = JSON.parse(localStorage.getItem('jobs')) || [];
      jobs.push(job);
      localStorage.setItem('jobs', JSON.stringify(jobs));
      renderJobs();
      closeForm();
    }

    function renderJobs() {
      feed.innerHTML = "";
      let jobs = JSON.parse(localStorage.getItem('jobs')) || [];
      const now = Date.now();
      jobs = jobs.filter(j => now - j.date < 14*24*60*60*1000); // 14 days
      localStorage.setItem('jobs', JSON.stringify(jobs));

      jobs.forEach(job => {
        const card = document.createElement('div');
        card.className = 'job-card';
        if (job.poster) {
          const img = document.createElement('img');
          img.src = job.poster;
          card.appendChild(img);
        }
        const h3 = document.createElement('h3');
        h3.innerText = job.position;
        card.appendChild(h3);

        const p1 = document.createElement('p');
        p1.innerText = job.description;
        card.appendChild(p1);

        if (job.salary) {
          const p2 = document.createElement('p');
          p2.innerText = "Salary: " + job.salary;
          card.appendChild(p2);
        }
        if (job.company) {
          const p3 = document.createElement('p');
          p3.innerText = "Company: " + job.company;
          card.appendChild(p3);
        }
        if (job.contact) {
          const p4 = document.createElement('p');
          p4.innerText = "Contact: " + job.contact;
          card.appendChild(p4);
        }
        if (job.category) {
          const p5 = document.createElement('p');
          p5.innerText = "Category: " + job.category;
          card.appendChild(p5);
        }

        const actions = document.createElement('div');
        actions.className = 'actions';

        const waBtn = document.createElement('button');
        waBtn.className = 'whatsapp';
        waBtn.innerText = 'WhatsApp';
        waBtn.onclick = () => {
          window.open(`https://wa.me/?text=${encodeURIComponent(job.position + " - " + window.location.href)}`);
        };
        actions.appendChild(waBtn);

        const fbBtn = document.createElement('button');
        fbBtn.innerText = 'Facebook';
        fbBtn.onclick = () => {
          window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`);
        };
        actions.appendChild(fbBtn);

        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy';
        copyBtn.innerText = 'Copy Link';
        copyBtn.onclick = () => {
          navigator.clipboard.writeText(window.location.href);
          alert("Link copied!");
        };
        actions.appendChild(copyBtn);

        const delBtn = document.createElement('button');
        delBtn.className = 'delete-btn';
        delBtn.innerText = 'Delete';
        delBtn.onclick = () => {
          const pass = prompt("Enter admin password:");
          if (pass === ADMIN_PASSWORD) {
            let jobs = JSON.parse(localStorage.getItem('jobs')) || [];
            jobs = jobs.filter(j => j.id !== job.id);
            localStorage.setItem('jobs', JSON.stringify(jobs));
            renderJobs();
          } else {
            alert("Wrong password");
          }
        };
        actions.appendChild(delBtn);

        card.appendChild(actions);
        feed.appendChild(card);
      });

      if (adminMode) {
        document.querySelectorAll('.delete-btn').forEach(btn => btn.style.display = 'inline-block');
      } else {
        document.querySelectorAll('.delete-btn').forEach(btn => btn.style.display = 'none');
      }
    }

    function toggleAdminMode() {
      adminMode = !adminMode;
      renderJobs();
    }

    renderJobs();
  </script>
</body>
</html>
