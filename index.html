<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Halajobs.qa</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="admin-panel" id="adminPanel">
    <div class="admin-badge">ğŸ” ADMIN MODE</div>
    <div class="admin-stats">
      <div>ğŸ“Š Total Jobs: <span id="totalJobs">0</span></div>
      <div>ğŸ—‘ï¸ Session Deletions: <span id="sessionDeletions">0</span></div>
    </div>
    <div class="admin-instructions">
      <strong>Instructions:</strong><br>
      â€¢ Click red ğŸ—‘ï¸ buttons to delete jobs<br>
      â€¢ Double confirmation required<br>
      â€¢ Ctrl+Shift+M to exit admin mode
    </div>
  </div>

  <div class="confirm-modal" id="confirmModal">
    <div class="confirm-content">
      <h3>âš ï¸ Delete Job?</h3>
      <div id="jobDetails"></div>
      <input type="password" class="passcode-input" id="deletePasscode" placeholder="Enter passcode" maxlength="6">
      <div class="confirm-buttons">
        <button class="confirm-btn danger" id="confirmDelete">ğŸ—‘ï¸ Delete</button>
        <button class="confirm-btn cancel" id="cancelDelete">âŒ Cancel</button>
      </div>
    </div>
  </div>

  <header>
    <h1>Halajobs.qa</h1>
    <div class="top-controls">
      <input type="text" id="search" placeholder="ğŸ” Search jobs...">
      <select id="categoryFilter">
        <option value="all">All Categories</option>
        <option value="Helper">Helper</option>
        <option value="Driver">Driver</option>
        <option value="Engineer">Engineer</option>
        <option value="Accountant">Accountant</option>
        <option value="Delivery">Delivery</option>
        <option value="Sales">Sales</option>
        <option value="IT">IT</option>
        <option value="Healthcare">Healthcare</option>
        <option value="Construction">Construction</option>
        <option value="Technician">Technician</option>
        <option value="Others">Others</option>
      </select>
      <button class="post-btn" id="openModal">âœ¨ Post Job</button>
      <button class="quick-post-btn" id="openQuickModal">ğŸ“· Quick Post</button>
    </div>
  </header>

  <main>
    <div class="demo-notice" id="demoNotice" style="display: none;">
      âš ï¸ Demo Mode: Configure Supabase to enable full functionality
    </div>
    <div id="jobsList">
      <div class="loading">
        <div class="spinner"></div>
        <span>Loading jobs...</span>
      </div>
    </div>
  </main>

  <footer>
    Â© 2025 Halajobs.qa â€” Your Gateway to Jobs in Qatar ğŸŒŸ
    <a href="info.html">About & Privacy Policy</a>
  </footer>

  <div class="modal" id="jobModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Post a New Job</h2>
        <button class="close-btn" id="closeModal">Ã—</button>
      </div>
      
      <div class="posting-mode-toggle">
        <button class="mode-btn active" id="detailedModeBtn">ğŸ“ Detailed Form</button>
        <button class="mode-btn" id="quickModeBtn">ğŸ“· Image Only</button>
      </div>

      <div id="detailedForm">
        <input type="text" id="position" placeholder="Job Position" required>
        <span class="required">*</span>
        
        <textarea id="description" placeholder="Job Description (be detailed about requirements, benefits, etc.)" required></textarea>
        <span class="required">*</span>
        
        <input type="text" id="salary" placeholder="Salary (e.g., QR 3000/month, Negotiable)">
        
        <input type="text" id="company" placeholder="Company Name" required>
        <span class="required">*</span>
        
        <input type="text" id="location" placeholder="Location (e.g., Doha, Al Rayyan)">
        
        <select id="category" required>
          <option value="">Select Job Category</option>
          <option value="Helper">Helper</option>
          <option value="Driver">Driver</option>
          <option value="Engineer">Engineer</option>
          <option value="Accountant">Accountant</option>
          <option value="Delivery">Delivery</option>
          <option value="Sales">Sales</option>
          <option value="IT">IT</option>
          <option value="Healthcare">Healthcare</option>
          <option value="Construction">Construction</option>
          <option value="Technician">Technician</option>
          <option value="Others">Others</option>
        </select>
        <span class="required">*</span>
        
        <input type="email" id="contact" placeholder="Contact Email (optional)">
        
        <div class="file-input-wrapper">
          <input type="file" id="poster" accept="image/*" style="display: none;">
          <div class="file-input" onclick="document.getElementById('poster').click()">
            ğŸ“ Click to upload job poster (optional)
          </div>
        </div>
      </div>

      <div id="quickForm" style="display: none;">
        <div class="quick-upload-zone" id="quickUploadZone">
          <h3>ğŸ“· Upload Job Poster</h3>
          <p>Drag & drop your job poster here or click to select</p>
          <p style="font-size: 12px; color: #666;">Image should contain all job details</p>
          <input type="file" id="quickPoster" accept="image/*" style="display: none;">
        </div>
        <img id="quickImagePreview" class="image-preview" style="display: none;" alt="Job poster preview">
        
        <input type="text" id="quickTitle" placeholder="Optional: Job Title (will be extracted from image if empty)">
        <input type="text" id="quickCompany" placeholder="Optional: Company Name (will be extracted from image if empty)">
        
        <select id="quickCategory">
          <option value="">Auto-detect category (recommended)</option>
          <option value="Helper">Helper</option>
          <option value="Driver">Driver</option>
          <option value="Engineer">Engineer</option>
          <option value="Accountant">Accountant</option>
          <option value="Delivery">Delivery</option>
          <option value="Sales">Sales</option>
          <option value="IT">IT</option>
          <option value="Healthcare">Healthcare</option>
          <option value="Construction">Construction</option>
          <option value="Technician">Technician</option>
          <option value="Others">Others</option>
        </select>
      </div>
      
      <button id="submitJob">ğŸš€ Post Job</button>
      
      <div class="success" id="successMsg">âœ… Job Posted Successfully!</div>
      <div class="error" id="errorMsg">âŒ Error posting job. Please try again.</div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
